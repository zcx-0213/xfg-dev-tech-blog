1. ## redis已经扣减但没有存入延迟队列就宕机了怎么办？

   - 可以使用lua脚本，如果中途操作失败，那么更改就不会生效
   - 分布式事务：可以使用mq来确保redis扣减，并且存入延迟队列
   - 数据恢复机制：也就是使用多线程，定义一个定时任务，扫描不一致的数据，并且使用xxlob进行补偿

2. 